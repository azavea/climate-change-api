[
    {
        "cpu": 10,
        "essential": true,
        "memory": 512,
        "name": "nginx",
        "image": "${api_server_nginx_url}",
        "links": [
            "django"
        ],
        "portMappings": [
            {
                "containerPort": 443,
                "hostPort": 0
            }
        ],
        "logConfiguration": {
            "logDriver": "syslog",
            "options": {
                "syslog-address": "${cc_api_papertrail_endpoint}",
                "syslog-tls-ca-cert": "/etc/papertrail-bundle.pem",
                "tag": "nginx"
            }
        }
    },
    {
        "cpu": 10,
        "essential": true,
        "image": "${api_server_statsd_url}",
        "memory": 256,
        "name": "statsd",
        "mountPoints": [
            {
                "sourceVolume": "statsd",
                "containerPath": "/var/lib/statsd/config.js",
                "readOnly": true
            }
        ]
    },
    {
        "cpu": 10,
        "essential": true,
        "memory": 1024,
        "name": "django",
        "image": "${api_server_django_url}",
        "links": [
            "statsd"
        ],
        "portMappings": [],
        "environment": [
            {
                "name": "CC_SECRET_KEY",
                "value": "${django_secret_key}"
            },
            {
                "name": "CC_DB_HOST",
                "value": "${rds_host}"
            },
            {
                "name": "CC_DB_PORT",
                "value": "5432"
            },
            {
                "name": "CC_DB_PASSWORD",
                "value": "${rds_password}"
            },
            {
                "name": "CC_DB_USER",
                "value": "${rds_username}"
            },
            {
                "name": "CC_DB_DATABASE",
                "value": "${rds_database_name}"
            },
            {
                "name": "CC_CACHE_HOST",
                "value": "${ec_memcached_host}"
            },
            {
                "name": "CC_CACHE_PORT",
                "value": "${ec_memcached_port}"
            },
            {
                "name": "CC_SQS_QUEUE_NAME",
                "value": "${sqs_queue_name}"
            },
            {
                "name": "AWS_DEFAULT_REGION",
                "value": "${aws_region}"
            },
            {
                "name": "CC_S3STORAGE_BUCKET",
                "value": "${s3_storage_bucket}"
            },
            {
                "name": "CC_ALLOWED_HOSTS",
                "value": "${django_allowed_hosts}"
            },
            {
                "name": "CC_ROLLBAR_SERVER_SIDE_ACCESS_TOKEN",
                "value": "${rollbar_server_side_access_token}"
            },
            {
                "name": "CC_STACK_TYPE",
                "value": "${environment}"
            },
            {
                "name": "CC_FF_ARRAY_DATA",
                "value": "${feature_flag_array_data}"
            },
            {
                "name": "COMMIT",
                "value": "${git_commit}"
            }
        ],
        "logConfiguration": {
            "logDriver": "syslog",
            "options": {
                "syslog-address": "${cc_api_papertrail_endpoint}",
                "syslog-tls-ca-cert": "/etc/papertrail-bundle.pem",
                "tag": "django"
            }
        }
    }
]
