{
  "title": "UserProject Schema",
  "type": "object",
  "properties": {
    "id": {
      "type": "string"
    },
    "name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "visibility": {
      "type": "number"
    },
    "city": {
      "$ref": "#/definitions/city"
    },
    "dataset": {
      "$ref": "#/definitions/dataset"
    },
    "scenario": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": ["name"]
    },
    "allModels": {
      "type": "boolean"
    },
    "models": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/model"
      }
    },
    "charts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/chart"
      }
    },
    "multiChartScrubber": {
      "type": "boolean"
    },
    "extraParams": {
      "type": "object"
    }
  },
  "additionalProperties": false,
  "required": ["name", "city",
               "scenario", "models", "charts"],
  "definitions": {
    "chart": {
      "type": "object",
      "properties": {
        "indicator": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "label": {"type": "string"},
            "description": {"type": "string"},
            "time_aggregation": {"type": "string"}
          }
        },
        "unit": {"type": "string"}
      },
      "additionalProperties": false,
      "required": ["indicator", "unit"]
    },
    "model": {
      "type": "object",
      "properties": {
        "datasets": {
          "type": "array",
          "items": {
                    "type": "string"
                   }
        },
        "name": {"type": "string"},
        "label": {
          "anyOf": [
            {"type": "string"},
            {"type": "null"}
          ]
        },
        "base_time": {
          "anyOf": [
            {"type": "string"},
            {"type": "null"}
          ]
        },
        "enabled": {"type": "boolean"},
        "selected": {"type": "boolean"}
      },
      "additionalProperties": false,
      "required": ["name", "selected"]
    },
    "city": {
      "type": "object",
      "properties": {
        "id": {
          "type": "number"
        },
        "type": {
          "type": "string",
          "enum": ["Feature"]
        },
        "geometry": {
          "$ref": "#/definitions/pointgeom"
        },
        "properties": {
          "type": "object",
          "properties": {
            "datasets": {
              "type": "array",
              "items": {
                        "type": "string"
                       }
            },
            "name": {
              "type": "string"
            },
            "admin": {
              "type": "string"
            },
            "population": {
              "type": "number"
            },
            "region": {
              "type": "number"
            },
            "map_cell": {"$ref": "#/definitions/pointgeom"}
          },
          "additionalProperties": false,
          "required": ["name", "admin"]
        }
      },
      "additionalProperties": false,
      "required": ["id", "type", "geometry", "properties"]
    },
    "dataset": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "url": {
          "type": "string"
        },
        "models": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false,
      "required": ["name", "models"]
    },
    "pointgeom": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["Point"]
        },
        "coordinates": {
          "type": "array",
          "items": {
            "type": "number",
            "minItems": 2,
            "maxItems": 2
          }
        }
      },
      "additionalProperties": false,
      "required": ["type", "coordinates"]
    }
  }
}
