version: '2'
services:
  django:
    build:
      context: ./django
      dockerfile: Dockerfile
    environment:
      CC_DEBUG: 'true'
      DJANGO_LOG_LEVEL: 'INFO'
      AWS_PROFILE: 'climate'
    ports:
      - "8080:8080"
      - "8082:8082"
    links:
      - postgres
    depends_on:
      - postgres
    volumes:
      - .:/opt
      - $HOME/.aws:/root/.aws:ro
  postgres:
    image: quay.io/azavea/postgis:0.1.0
    environment:
      POSTGRES_USER: climate
      POSTGRES_PASSWORD: climate
      POSTGRES_DB: climate
    ports:
      - "5432:5432"
